---
toc: true
toc_label: "è¿ç»´é€ŸæŸ¥01"
toc_icon: "copy"
title: "è¿ç»´é€ŸæŸ¥01"
tags: è¿ç»´ æŽ’é”™
categories: "devop"
classes: wide
excerpt: "è¿ç»´å¸¸è§é—®é¢˜"
header:
  overlay_image: /assets/images/header/matrix2.jpg
  overlay_filter: rgba(0, 0, 0, 0.8)
---





## ç½‘ç»œç®¡ç†




### ç³»ç»Ÿ




#### ä¿®æ”¹ http çš„æœ€å¤§å¹¶å‘è¯·æ±‚æ•°

é€šè¿‡ä¿®æ”¹è¯¥é…ç½®æ–‡ä»¶ä¸­çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°é‡å®žçŽ°ï¼Œé‡å¯åŽç”Ÿæ•ˆã€‚

```bash
$ cat /etc/security/limits.conf
soft nofile 10240
hard nofile 10240
```



#### æ£€æŸ¥ç½‘ç»œä¸­å“ªäº›åœ°å€åœ¨çº¿

192.168.1.0/24 ç½‘ç»œä¸­ï¼Œå“ªäº› IP åœ°å€åœ¨çº¿ã€‚

èƒ½ ping é€šåˆ™è®¤ä¸ºåœ¨çº¿ï¼Œping çš„è¿”å›žå€¼ä¸º 0 åˆ™è®¤ä¸ºæ˜¯é€šçš„ã€‚

```bash
#!/bin/bash
for ip in `seq 1 255`
do
  ping -c 1 192.168.1.$ip > /dev/null 2>&1
  if [ $? -eq 0 ]; then
    echo 192.168.1.$ip UP
  else
    echo 192.168.1.$ip DOWN
  fi
done
wait
```





#### æƒå¨ DNS ä¸Žé€’å½’ DNS

##### æƒå¨ DNS

æƒå¨ DNS æ˜¯ç‰¹å®šåŸŸåè®°å½•åœ¨åŸŸåæ³¨å†Œå•†å¤„æ‰€è®¾ç½®çš„ DNS æœåŠ¡å™¨ï¼Œ**ç”¨äºŽç‰¹å®šåŸŸåçš„ç®¡ç†**ï¼ˆå¢žåŠ ã€åˆ é™¤ã€ä¿®æ”¹ç­‰ï¼‰ã€‚æƒå¨ DNS æœåŠ¡å™¨ **åªå¯¹è‡ªå·±æ‹¥æœ‰çš„åŸŸåè¿›è¡Œè§£æž**ï¼Œå¯¹äºŽä¸æ˜¯è‡ªå·±çš„åŸŸååˆ™ **æ‹’ç»è®¿é—®**ã€‚

##### é€’å½’ DNS

é€’å½’ DNS ä¹Ÿç§°æœ¬åœ° DNS æˆ– **ç¼“å­˜ DNS**ï¼Œç”¨äºŽåŸŸåæŸ¥è¯¢ã€‚

é€’å½’ DNS ä¼š **è¿­ä»£æƒå¨æœåŠ¡å™¨è¿”å›žçš„åº”ç­”**ï¼Œç›´è‡³æœ€ç»ˆæŸ¥è¯¢åˆ°çš„ IP åœ°å€ï¼Œå°†å…¶è¿”å›žç»™å®¢æˆ·ç«¯ï¼Œå¹¶å°†è¯·æ±‚ç»“æžœç¼“å­˜åˆ°æœ¬åœ°ã€‚





#### æ™ºèƒ½ DNS

ç”¨æˆ·å‘èµ· DNS è§£æžè¯·æ±‚æ—¶ï¼Œå…ˆåˆ¤æ–­è¯¥ç”¨æˆ·æ¥è‡ªäºŽå“ªä¸ªè¿è¥å•†ï¼Œç„¶åŽå°†è¯·æ±‚ **è½¬å‘ç»™è¯¥è¿è¥å•†æŒ‡å®šçš„ IP åœ°å€** è¿›è¡Œè§£æžï¼Œé¿å…è·¨è¿è¥è®¿é—®ç½‘ï¼Œç›®çš„åœ¨äºŽ **æå‡è§£æžé€Ÿåº¦**ã€‚




#### ç«¯å£è½¬å‘

å°†å¯¹æœ¬åœ° 80 ç«¯å£çš„è¯·æ±‚è½¬å‘åˆ°æœ¬åœ° 8080 ç«¯å£ï¼ŒIP åœ°å€ä¸º 10.0.0.254ã€‚

```bash
$ iptables -A PREROUTING -t nat \
	-p tcp -d 10.0.0.254 --dport 80 \
	-j DNAT --to-destination 10.0.0.254:8080
```













### Apache


#### æ‰¾å‡ºè®¿é—®é‡æœ€å¤§çš„ 5 ä¸ª IP åœ°å€

ä»Ž apache çš„æ—¥å¿— `access.log` ä¸­ï¼Œç»Ÿè®¡è®¿é—®é‡æœ€å¤šçš„ 5 ä¸ª IP åœ°å€ã€‚

```bash
$ cat /var/log/httpd/test-access.log \
| awk '{print $1}' \
| sort \
| uniq -c \
| sort -rn \
| head -5
```



#### é™åˆ¶ apache æ¯ç§’æ–°å»ºè¿žæŽ¥æ•°ä¸º 1ï¼Œå³°å€¼ä¸º 3

æ¯ç§’æ–°å»ºè¿žæŽ¥æ•°ç”¨é˜²ç«å¢™æ¥é…ç½®ï¼š

```bash
$ sudo iptables -A INPUT -d 172.6.10.1 -p tcp --dport 80 -m limit --limit 1/second -j ACCEPT
```

æ¯ç§’æœ€å¤§è¿žæŽ¥æ•°åœ¨ apache é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ï¼š

```conf
MaxRequestWorkers 3"
```








### FTP


#### FTP çš„ä¸»åŠ¨æ¨¡å¼å’Œè¢«åŠ¨æ¨¡å¼

ä¸»åŠ¨è¿˜æ˜¯è¢«åŠ¨æ˜¯ **ä»ŽæœåŠ¡ç«¯çš„è§’åº¦** æ¥è¯´çš„ã€‚**ä¸»åŠ¨** æ¨¡å¼ä¸­æ•°æ®è¿žæŽ¥æ˜¯ç”± **æœåŠ¡ç«¯å‘èµ·** çš„ï¼Œè€Œ **è¢«åŠ¨** æ¨¡å¼ä¸­åˆ™æ˜¯ç”± **å®¢æˆ·ç«¯å‘èµ·** çš„ã€‚


##### ä¸»åŠ¨æ¨¡å¼

* å®¢æˆ·ç«¯å‘èµ·æŽ§åˆ¶è¿žæŽ¥ï¼šä»Žç«¯å£Cè¿žæŽ¥åˆ°æœåŠ¡å™¨ç«¯å£21ï¼Œå‘ŠçŸ¥æœåŠ¡å™¨è‡ªå·±çš„æ•°æ®ç«¯å£ä¸ºC+1ï¼›
* æœåŠ¡å™¨åº”ç­”ï¼šä»Žç«¯å£21è¿”å›žåº”ç­”æ¶ˆæ¯ï¼ŒæŽ§åˆ¶è¿žæŽ¥å»ºç«‹ï¼›
* æœåŠ¡å™¨å‘èµ·æ•°æ®è¿žæŽ¥ï¼šä»Žç«¯å£20è¿žæŽ¥åˆ°å®¢æˆ·ç«¯ç«¯å£C+1ï¼›
* å®¢æˆ·ç«¯åº”ç­”ï¼šè¿”å›žåº”ç­”æ¶ˆæ¯ï¼Œæ•°æ®è¿žæŽ¥å»ºç«‹ã€‚


##### è¢«åŠ¨æ¨¡å¼

* å®¢æˆ·ç«¯å‘èµ·æŽ§åˆ¶è¿žæŽ¥ï¼šä»Žç«¯å£Cè¿žæŽ¥åˆ°æœåŠ¡å™¨ç«¯å£21ï¼Œå‘ŠçŸ¥æœåŠ¡ç«¯è‡ªå·±ä½¿ç”¨è¢«åŠ¨æ¨¡å¼ï¼›
* æœåŠ¡ç«¯åº”ç­”ï¼šè¿”å›žåº”ç­”æ¶ˆæ¯ï¼Œå¹¶å‘ŠçŸ¥è‡ªå·±æ•°æ®ç«¯å£å·Sï¼ŒæŽ§åˆ¶è¿žæŽ¥å»ºç«‹ï¼›
* å®¢æˆ·ç«¯å‘èµ·æ•°æ®è¿žæŽ¥ï¼šä»ŽC+1ç«¯å£è¿žæŽ¥åˆ°æœåŠ¡å™¨Sç«¯å£ï¼›
* æœåŠ¡ç«¯åº”ç­”ï¼šè¿”å›žåº”ç­”æ¶ˆæ¯ï¼Œæ•°æ®è¿žæŽ¥å»ºç«‹ã€‚






### nginx


#### ä½œåå‘ä»£ç†æ—¶ï¼Œå¦‚ä½•åœ¨æ—¥å¿—ä¸­ä¿å­˜è®¿å®¢çœŸå®ž IP åœ°å€

```conf
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header Host $http_host;
```

ä¿®æ”¹å®Œé…ç½®ï¼Œé‡æ–°åŠ è½½é…ç½®ï¼š

```bash
$ sudo nginx -s reload
```




























## MySQL



### å¤åˆ¶



#### ä¸€ä¸»å¤šä»Žï¼Œä¸»å¤±æ•ˆï¼Œæå‡ä»Žä¸ºä¸»

* **æŸ¥çœ‹** æ‰€æœ‰ä»ŽæœåŠ¡å™¨çš„å¤åˆ¶ **ä½ç½®**ï¼š`SHOW SLAVE STATUS` è¿”å›žçš„ç»“æžœä¸­æŸ¥çœ‹ `Master_Log_Pos`ï¼Œé€‰æ‹©æœ€æ–°çš„åšä¸ºæ–°*ä¸»*
* è®©æ‰€æœ‰*ä»Ž*æŠŠ **ä¸­ç»§æ—¥å¿—æ‰§è¡Œå®Œæ¯•**
* æ–°*ä¸»* **åœæ­¢åšä»Ž**ï¼šåœ¨æ–°ä¸»ä¸Šæ‰§è¡Œ `STOP SLAVE`
* æ–°*ä¸»* **å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—**ï¼šä¿®æ”¹ `my.cnf`ï¼Œå¯ç”¨ `log-bin`ï¼Œé‡å¯ mysql
* æŠŠæ–°*ä¸»* **ä»Žå…¶åŽŸä¸»æ–­å¼€**ï¼šæ‰§è¡Œ `CHANGE MASTER TO` åŠ `RESET SLAVE`
* è®°å½•æ–°ä¸»çš„ **äºŒè¿›åˆ¶æ—¥å¿—åæ ‡**ï¼šç”¨ `SHOW MASTER STATUS`
* æ‰€æœ‰ä»Ž **æŒ‡å‘æ–°ä¸»**ï¼šæ‰€æœ‰*ä»Ž*ä¸Šè¿è¡Œ `CHANGE MASTER TO` å‘½ä»¤ï¼ŒæŒ‡å‘æ–°ä¸»ï¼Œä½¿ç”¨ä¸Šä¸€æ­¥è®°ä¸‹æ¥çš„åæ ‡








### å¤‡ä»½ä¸Žæ¢å¤


#### ä½¿ç”¨äºŒè¿›åˆ¶æ—¥å¿—è¿›è¡Œæ—¶é—´ç‚¹æ¢å¤

å¯ä»¥ç”¨æ­¤æ–¹æ³•æ¢å¤è¢«è¯¯åˆ çš„æ•°æ®åº“ã€‚

æ ¹æ®å…·ä½“æƒ…å†µï¼Œåˆ¤æ–­æ˜¯å¦è¦å…ˆä½¿ç”¨ä¸€ä¸ª **å®Œå…¨å¤‡ä»½** è¿›è¡Œæ¢å¤ï¼Œç„¶åŽå†è¿›è¡Œæ—¶é—´ç‚¹æ¢å¤ã€‚


##### å®šä½äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶

æ—¶é—´ç‚¹æ¢å¤çš„ä¿¡æ¯æºæ˜¯ **ä¸€ç»„å¢žé‡å¤‡ä»½**ï¼Œå³åœ¨å®Œå…¨å¤‡ä»½ä¹‹åŽç”Ÿæˆçš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ã€‚å› æ­¤ï¼Œå¿…é¡»ä½¿ç”¨ `--log-bin` é€‰é¡¹ä»¥å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—ã€‚

é€šå¸¸äºŒè¿›åˆ¶æ—¥å¿—ä½äºŽæ•°æ®ç›®å½•ä¸­ã€‚

###### æŸ¥çœ‹æ‰€æœ‰äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶

```sql
mysql> SHOW BINARY LOGS;
```

###### æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶

```sql
mysql> SHOW MASTER STATUS;
```


##### æŠŠäºŒè¿›åˆ¶æ—¥å¿—è½¬æ¢ä¸ºæ–‡æœ¬ï¼Œå¹¶ä¿®æ”¹

ä»ŽäºŒè¿›åˆ¶æ—¥å¿—ä¸­æ‰§è¡Œäº‹ä»¶ï¼Œå¯ä»¥å®žçŽ°å¯¹æ•°æ®å˜æ›´è¿›è¡Œé‡åšã€‚å€Ÿæ­¤å¯ä»¥æ¥æ¢å¤æŸä¸ªæ—¶é—´èŒƒå›´å†…æ‰€å‘ç”Ÿçš„æ•°æ®ä¿®æ”¹ã€‚

`mysqlbinlog` å‘½ä»¤å¯ä»¥æŠŠäºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ä¸­çš„äº‹ä»¶ï¼Œç”±äºŒè¿›åˆ¶æ ¼å¼ **è½¬æ¢** ä¸ºæ–‡æœ¬æ ¼å¼ï¼Œä»¥ä¾¿ç”¨æ¥æ‰§è¡Œæˆ–æŸ¥çœ‹ã€‚å¯ä»¥åŸºäºŽäº‹ä»¶ **æ—¶é—´** æˆ– **ä½ç½®** æ¥é€‰æ‹©äº‹ä»¶ã€‚

æŠŠäºŒè¿›åˆ¶æ—¥å¿—è½¬æ¢ä¸ºæ–‡æœ¬ï¼Œå¹¶ä¿®æ”¹ï¼š

```bash
shell> mysqlbinlog binlog_files > tmpfile
shell> vi tmpfile
```

ç¼–è¾‘æ–‡æœ¬æ–‡ä»¶ï¼Œæ‰¾åˆ°è¯¯æ“ä½œçš„è¯­å¥ï¼Œå¦‚ `DROP DATABASE`ï¼Œå°†å…¶åˆ é™¤ã€‚å¦‚æžœæœ‰å…¶å®ƒæƒ³è¦åˆ é™¤çš„ï¼Œå¯ä»¥ä¸€å¹¶è¿›è¡Œã€‚


##### æ‰§è¡Œä¿®æ”¹è¿‡çš„æ—¥å¿—æ–‡ä»¶

```bash
shell> mysql -u root -p < tmpfile
```

###### å¤šä¸ªæ—¥å¿—æ–‡ä»¶çš„æ‰§è¡Œ

å¦‚æžœæœ‰ä¸€ä¸ªä»¥ä¸Šçš„äºŒè¿›åˆ¶æ—¥å¿—è¦æ‰§è¡Œï¼Œæ¯”è¾ƒå®‰å…¨çš„åŠžæ³•æ˜¯ç”¨ä¸€ä¸ªè¿žæŽ¥æ¥å¤„ç†æ‰€æœ‰æ–‡ä»¶ã€‚

å¦‚ä¸‹è¿™ç§æ–¹æ³•å¾ˆä¸å®‰å…¨ï¼š

```bash
shell> mysqlbinlog binlog.000001 | mysql -u root -p # DANGER!!
shell> mysqlbinlog binlog.000002 | mysql -u root -p # DANGER!!
```

ðŸš© å¦‚æžœç¬¬ä¸€ä¸ªæ—¥å¿—ä¸­åŒ…å« `CREATE TEMORARY TABLE` è¯­å¥ï¼Œè€Œç¬¬äºŒä¸ªæ—¥å¿—åŒ…å«è¦ä½¿ç”¨è¯¥ä¸´æ—¶è¡¨æ ¼çš„è¯­å¥ï¼Œè¿™ç§ç”¨ä¸åŒçš„è¿žæŽ¥æ¥å¤„ç†äºŒè¿›åˆ¶æ—¥å¿—çš„æ–¹æ³•å°±ä¼šäº§ç”Ÿé—®é¢˜ã€‚å½“ç¬¬ä¸€ä¸ª mysql è¿›ç¨‹ç»“æŸæ—¶ï¼ŒæœåŠ¡å™¨ä¼šåˆ é™¤ä¸´æ—¶è¡¨æ ¼ï¼ŒäºŽæ˜¯ç¬¬äºŒä¸ª mysql è¿›ç¨‹æ˜¯æ‰¾ä¸åˆ°å®ƒçš„ï¼ŒæœåŠ¡å™¨ä¼šæŠ¥é”™ `unknown table`ã€‚

è¦æƒ³é¿å…è¿™ç±»é—®é¢˜ï¼Œä¸€å®šè¦ä½¿ç”¨ **å•ä¸€** çš„è¿žæŽ¥æ¥æ‰§è¡Œæ‰€æœ‰çš„äºŒè¿›åˆ¶æ—¥å¿—å†…å®¹ï¼š

```bash
shell> mysqlbinlog binlog.000001 binlog.000002 | mysql -u root -p
```

æˆ–è€…æå‰æŠŠå¤šä¸ªæ—¥å¿—æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªï¼Œå†æ‰§è¡Œï¼š

```bash
shell> mysqlbinlog binlog.000001 >  /tmp/statements.sql
shell> mysqlbinlog binlog.000002 >> /tmp/statements.sql
shell> mysql -u root -p -e "source /tmp/statements.sql"
```















## ç³»ç»Ÿç›‘æµ‹





### ç½‘ç»œè¿žæŽ¥


#### æŸ¥çœ‹ http çš„å¹¶å‘è¯·æ±‚æ•°ä¸Žå…¶ TCP è¿žæŽ¥çŠ¶æ€

```bash
$ ss -s
$ netstat -n | awk '/^tcp/{a[$NF]++} END{for(i in a){print i,a[i]}}'
```


#### æŸ¥çœ‹å“ªä¸ªåœ°å€å¯¹ 80 ç«¯å£çš„è®¿é—®æ¬¡æ•°æœ€å¤š

ç”¨ `tcpdump` å—…æŽ¢ 80 ç«¯å£çš„è®¿é—®ï¼Œçœ‹è°æœ€é«˜ã€‚

```bash
$ sudo tcpdump -i venet0 -tnn dst port 80 -c 1000 \
| awk '/^IP/{print $2}' \
| awk -F. '{print $1 "." $2 "." $3 "." $4}' \
| uniq -c \
| sort -rn
```


#### æŸ¥çœ‹æ¯ä¸ª ip åœ°å€çš„è¿žæŽ¥æ•°

```bash
$ netstat -n \
| awk '/^tcp/ {print $5}' \
| awk -F: '{print $1}' \
| sort \
| uniq -c \
| sort -rn
```








### è¿›ç¨‹



#### æŸ¥çœ‹å½“å‰è¿›ç¨‹åˆ—è¡¨

```bash
$ ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root          1  0.0  0.5 193628  5092 ?        Ss   06:58   0:03 /usr/lib/systemd/systemd --switched-root --
root          2  0.0  0.0      0     0 ?        S    06:58   0:00 [kthreadd]
root          3  0.0  0.0      0     0 ?        S    06:58   0:00 [ksoftirqd/0]
... ...
```

`VSZ`: è¿›ç¨‹å ç”¨çš„ **è™šæ‹Ÿå†…å­˜ç©ºé—´**

`RSS`: è¿›ç¨‹å ç”¨çš„ **å®žé™…ç‰©ç†å†…å­˜ç©ºé—´**
































## å®‰å…¨


#### ç”Ÿæˆ 32 ä½éšæœºå¯†ç 

ç”¨ `/dev/urandom` åšç§å­ï¼Œç”¨ `sha512sum` è®¡ç®—ï¼Œç”¨ `head -c` å–ä»»æ„ä½ã€‚

```bash
$ cat /dev/urandom | head -10 | sha512sum | head -c 32
```

































## æ–‡ä»¶ç³»ç»Ÿ






### ç¬¦å·é“¾æŽ¥ä¸Žç¡¬é“¾æŽ¥

* ç¡¬é“¾æŽ¥æ˜¯ä¸¤ä¸ªæ–‡ä»¶åŒæ—¶æŒ‡å‘åŒä¸€ä¸ª **inode**ï¼šåˆ é™¤ä¸€ä¸ªä¸ä¼šå½±å“å¦ä¸€ä¸ªï¼Œç›´åˆ°æœ€åŽä¸€ä¸ªæ–‡ä»¶è¢«åˆ é™¤ï¼Œæ–‡ä»¶æ•°æ®æ‰çœŸæ­£è¢«åˆ é™¤ï¼›
* ç¬¦å·é“¾æŽ¥æ˜¯ä¸¤æ–‡ä»¶åŒæ—¶æŒ‡å‘åŒä¸€ä¸ª **æ–‡ä»¶å**ï¼šå³å¿«æ·æ–¹å¼ã€‚åˆ é™¤ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªå°±æ²¡æ³•ç”¨äº†ã€‚









### ç£ç›˜/åˆ†åŒº


#### ä¿®å¤åˆ†åŒºé”™è¯¯

æ£€æµ‹å¹¶ä¿®å¤åˆ†åŒº `/dev/hda5`

```bash
$ sudo fsck /dev/hda5
```

`fsck` ç”¨æ¥æ£€æŸ¥å’Œç»´æŠ¤ä¸ä¸€è‡´çš„æ–‡ä»¶ç³»ç»Ÿã€‚è‹¥ç³»ç»ŸæŽ‰ç”µæˆ–ç£ç›˜å‘ç”Ÿé—®é¢˜ï¼Œå¯åˆ©ç”¨è¯¥å‘½ä»¤å¯¹æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ£€æŸ¥



#### ä¿å­˜å½“å‰ç£ç›˜åˆ†åŒºçš„åˆ†åŒºè¡¨

```bash
$ sudo dd if=/dev/sda of=./mbr.txt bs=1 count=512
```









### æŒ‚è½½


#### Linux å¦‚ä½•æŒ‚è½½ windows å…±äº«ç›®å½•


```bash
$ sudo mount.cifs //192.168.1.6/movie /mnt/win -o user=neo,password=matrix
$ sudo mount -t cifs -o username=neo,password=matrix //192.168.1.6/movie /mnt/win
```











### ç»Ÿè®¡


#### ç»Ÿè®¡ç›®å½•ä¸­æ–‡ä»¶æ•°é‡

æŸ¥çœ‹ `/var/log` ç›®å½•ä¸­æ–‡ä»¶çš„æ•°é‡ã€‚

```bash
$ ls -lR /var/log/ | grep "^-" | wc -l
```







### æŸ¥çœ‹æ–‡ä»¶


#### æŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶çš„å†…å®¹

```bash
$ hexdump -C somefile
```

`-C` ï¼šæ¯”è¾ƒè§„èŒƒçš„åå…­è¿›åˆ¶å’Œ ASCII ç æ˜¾ç¤º









### æ–‡ä»¶æ“ä½œ



#### å¯¹ç‰¹å®šå¤§å°çš„æ–‡ä»¶è¿›è¡Œæ“ä½œ

å°† `/usr/local/test` ç›®å½•ä¸‹å¤§äºŽ 100K çš„æ–‡ä»¶æ‹·è´åˆ° `/tmp` ç›®å½•ä¸­ã€‚












## æ“ä½œç³»ç»Ÿ




### ç”¨æˆ·ç®¡ç†

æ‰¹é‡æ·»åŠ  20 ä¸ªç”¨æˆ·ï¼Œç”¨æˆ·åä¸º `user01~20`ï¼Œå¯†ç ä¸º `user + 5ä¸ªéšæœºå­—ç¬¦`

```bash
#!/bin/bash
for i in `seq -f"%02g" 1 20`;do
  useradd user$i
  echo "user$i-`head -1 /dev/urandom|sha1sum|cut -c 1-5`" | passwd â€“stdin user$i >/dev/null 2>&1
done
```








### Linux å¯åŠ¨é¡ºåº

* BIOS
* MBR
* bootloader
* Linux å†…æ ¸
* systemd
* è¯»å–é…ç½®æ–‡ä»¶
* sysinit.target
* basic.target
* multi-user.target
* graphical.target"


































## åº”ç”¨ç¨‹åº






#### VI å¸¸ç”¨å¿«æ·é”®

`8yy` ï¼šä»Žæœ¬è¡Œèµ·å‘ä¸‹å¤åˆ¶8è¡Œ

`p` ï¼šç²˜è´´åˆ°å½“å‰è¡Œä¸‹é¢

`dd` ï¼šåˆ é™¤æœ¬è¡Œ

`dG` ï¼šåˆ é™¤å…¨éƒ¨ï¼Œæå‰è¦ gg åˆ°é¦–è¡Œ

`dâ†‘` ï¼šä»Žæœ¬è¡Œèµ·ï¼Œå‘ä¸Šåˆ é™¤ 2 è¡Œ

`d5â†‘` ï¼šä»Žæœ¬è¡Œèµ·ï¼Œå‘ä¸Šåˆ é™¤ 5 è¡Œ

`90, shift + G` ï¼š å®šä½åˆ°ç¬¬ 90 è¡Œ

`/keyword` ï¼šæŸ¥æ‰¾å…³é”®å­—ï¼ŒæŒ‰ N å®šä½ä¸‹ä¸€å¤„































## è„šæœ¬




### éšæœºæ•°



#### åœ¨ 6 ~ 9 èŒƒå›´å†…å–éšæœºæ•°

```bash
$ echo `expr $[RANDOM%4] + 6`
```











### è°ƒè¯•




#### æ£€æŸ¥è„šæœ¬æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œ

>æœ¬é¢˜çš„é€»è¾‘æœ‰äº›ç™½ç—´ï¼Œæƒå½“ç†Ÿæ‚‰è„šæœ¬ç”¨äº†ã€‚

å¦‚æžœå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œè¿”å›žæç¤ºæ¶ˆæ¯ï¼›å¦‚æžœè¿è¡Œé”™è¯¯ï¼Œé”®å…¥ V æˆ– vï¼Œä¼šç”¨ vim è‡ªåŠ¨æ‰“å¼€è„šæœ¬ï¼Œé”®å…¥ Q æˆ– q æˆ–ä»»æ„é”®å¯å¿½ç•¥å¹¶é€€å‡ºã€‚

```bash
#!/bin/bash
if [ ${#1} == 0 ] ; then
  read -p "please type in the script name : " file
else
  file=$1
fi

# run the script if it's not empty
if [ -f $file ]; then
  sh -n $file > /dev/null 2>&1
  if [ $? -ne 0 ]; then
    read -p "Syntax error detected. Press Q to exit. Press V to open it with vim" answer
    case $answer in
	v | V )
      vim $file
      ;;
    q | Q)
      exit 0
      ;;
    *)
      exit 0
      ;;
    esac
  else
    echo 'no error detected, congratulations!'
  fi
else
  echo "$file not exist"
  exit 1
fi
```
